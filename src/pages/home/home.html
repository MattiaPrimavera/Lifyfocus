<ion-header>
  <ion-navbar color="primary">
    <button ion-button menuToggle icon-only>
      <ion-icon name='menu'></ion-icon>
    </button>
    <!-- <ion-title>{{ pageTitle }}</ion-title> -->
    <!-- Search bar -->
    <ion-toolbar color="primary">
      <ion-searchbar [(ngModel)]="searchInput" (ionInput)="onSearchInput()"></ion-searchbar>
    </ion-toolbar>

    <ion-buttons end>
      <!-- Done / Undone icon buttons -->
      <button ion-button secondary icon-only icon-end (click)="switchTasks()">
        <ion-icon color="white" name="switch"></ion-icon>
      </button>

      <!-- Add icon buttons -->
      <button ion-button secondary icon-only icon-end (click)="openTaskAdd()">
        <ion-icon color="white" name="create"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <ng-container *ngIf="filteredTasks$ | async as tasks; else loading">
    <ion-list>
      <mp-sliding-item *ngFor="let task of tasks"
        [menu]="slidingItemMenu"
        [item]="task"
        (itemClick)="openTaskUpdate($event)"
        (optionClick)="onSlidingItemMenuClick($event)">
      </mp-sliding-item>

      <ng-container *ngIf="tasks && !tasks.length" text-center>
          <p>No items.</p>
      </ng-container>
    </ion-list>
  </ng-container>

  <ng-template #loading>
    <mp-loader></mp-loader>
  </ng-template>
</ion-content>
